{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\utalwar\\\\Desktop\\\\authorCSS\\\\auth.or\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\utalwar\\\\Desktop\\\\authorCSS\\\\auth.or\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\utalwar\\\\Desktop\\\\authorCSS\\\\auth.or\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\utalwar\\\\Desktop\\\\authorCSS\\\\auth.or\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\utalwar\\\\Desktop\\\\authorCSS\\\\auth.or\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\utalwar\\\\Desktop\\\\authorCSS\\\\auth.or\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\utalwar\\\\Desktop\\\\authorCSS\\\\auth.or\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\utalwar\\\\Desktop\\\\authorCSS\\\\auth.or\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\utalwar\\\\Desktop\\\\authorCSS\\\\auth.or\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport getWeb3 from \"./utils/getWeb3\";\nimport OwnershipContract from \"./contracts/Ownership.json\";\nimport ipfs from \"./ipfsCall\";\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport \"react-tabs/style/react-tabs.css\";\nimport Modal from 'react-awesome-modal';\nimport Card from './Card.js';\nimport ProfileBooks from './ProfileBooks.js';\nimport \"./App.css\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      totalSold: null,\n      imageBuffer: null,\n      bookImage: null,\n      exists: false,\n      visibleTimer: false,\n      rentedBooks: [],\n      rentHash: null,\n      rent: null,\n      rentDays: null,\n      booksBoughtName: [],\n      booksBought: [],\n      wallet: null,\n      current: [],\n      visibleBook: false,\n      bookDetails: [],\n      prnt: false,\n      render: true,\n      visible: false,\n      bookName: null,\n      clientName: \"utsav\",\n      token: 0,\n      ownerName: null,\n      price: 0,\n      contentName: null,\n      viewText: 'Show Preview',\n      showPreview: false,\n      fileMetadata: [],\n      storageValue: [],\n      web3: null,\n      accounts: null,\n      contract: null,\n      buffer: null,\n      ipfsHash: null\n    };\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var self, web3, accounts, networkId, deployedNetwork, instance;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              self = _assertThisInitialized(_this);\n              window.addEventListener(\"keyup\", function (e) {\n                if (e.keyCode == 44) {\n                  self.setState({\n                    prnt: true\n                  });\n                  console.log(\"pressed!\");\n                }\n              });\n              setInterval(function () {\n                return _this.checkView();\n              }, 1000); //view timer\n\n              _context.prev = 3;\n              _context.next = 6;\n              return getWeb3();\n\n            case 6:\n              web3 = _context.sent;\n              _context.next = 9;\n              return web3.eth.getAccounts();\n\n            case 9:\n              accounts = _context.sent;\n              _context.next = 12;\n              return web3.eth.net.getId();\n\n            case 12:\n              networkId = _context.sent;\n              deployedNetwork = OwnershipContract.networks[networkId];\n              instance = new web3.eth.Contract(OwnershipContract.abi, deployedNetwork && deployedNetwork.address);\n              instance.address = \"0xbffdbf74b654b73f17e6cc7cf4fd82bf415f2b53\"; // Set web3, accounts, and contract to the state, and then proceed with an\n              // example of interacting with the contract's methods.\n\n              _this.setState({\n                web3: web3,\n                accounts: accounts,\n                contract: instance\n              });\n\n              _context.next = 23;\n              break;\n\n            case 19:\n              _context.prev = 19;\n              _context.t0 = _context[\"catch\"](3);\n              // Catch any errors for any of the above operations.\n              alert(\"Failed to load web3, accounts, or contract. Check console for details.\");\n              console.error(_context.t0);\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 19]]);\n    }));\n    _this.uploadTransaction =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var _this$state, accounts, contract, ipfsHash, contentName, ownerName, price, rent, rentDays, bookImage;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$state = _this.state, accounts = _this$state.accounts, contract = _this$state.contract, ipfsHash = _this$state.ipfsHash, contentName = _this$state.contentName, ownerName = _this$state.ownerName, price = _this$state.price, rent = _this$state.rent, rentDays = _this$state.rentDays, bookImage = _this$state.bookImage;\n              _context2.next = 3;\n              return contract.methods.uploadContent(ipfsHash, contentName, ownerName, price, rent, rentDays, bookImage).send({\n                from: accounts[0]\n              });\n\n            case 3:\n              console.log(\"storage Value: \", _this.state.storageValue);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.buyTokenTransaction =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var _this$state2, contract, accounts, clientName, token;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _this$state2 = _this.state, contract = _this$state2.contract, accounts = _this$state2.accounts, clientName = _this$state2.clientName, token = _this$state2.token;\n              _context3.next = 3;\n              return contract.methods.buyTokens(token).send({\n                from: accounts[0]\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    _this.purchaseTransaction =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      var _this$state3, ipfsHash, contract, accounts;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              console.log(\"Working\");\n              _this$state3 = _this.state, ipfsHash = _this$state3.ipfsHash, contract = _this$state3.contract, accounts = _this$state3.accounts;\n              _context4.next = 4;\n              return contract.methods.purchase(ipfsHash).send({\n                from: accounts[0]\n              });\n\n            case 4:\n              console.log(\"Transaction Successful !\");\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    _this.getCustomerCall =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee5() {\n      var _this$state4, contract, accounts, clientName, response;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _this$state4 = _this.state, contract = _this$state4.contract, accounts = _this$state4.accounts, clientName = _this$state4.clientName;\n              _context5.next = 3;\n              return contract.methods.getCustomer(accounts[0]).call();\n\n            case 3:\n              response = _context5.sent;\n\n              _this.setState({\n                wallet: response[0]._hex,\n                booksBought: response[1],\n                rentedBooks: response[2]\n              });\n\n              console.log(\"Books Bought : \", response);\n\n            case 6:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    _this.getAll =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee6() {\n      var contract, response;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              contract = _this.state.contract;\n              _context6.next = 3;\n              return contract.methods.getAllBooks().call();\n\n            case 3:\n              response = _context6.sent;\n\n              _this.setState({\n                bookDetails: response\n              });\n\n              console.log(\"books: \", _this.state.bookDetails);\n\n            case 6:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n    _this.rentTranact =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee7() {\n      var _this$state5, contract, accounts, rentHash;\n\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _this$state5 = _this.state, contract = _this$state5.contract, accounts = _this$state5.accounts, rentHash = _this$state5.rentHash;\n              _context7.next = 3;\n              return contract.methods.rentTransaction(rentHash).send({\n                from: accounts[0]\n              });\n\n            case 3:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n    _this.getTotal =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee8() {\n      var _this$state6, contract, accounts, rentHash, ipfsHash, total;\n\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _this$state6 = _this.state, contract = _this$state6.contract, accounts = _this$state6.accounts, rentHash = _this$state6.rentHash, ipfsHash = _this$state6.ipfsHash;\n              _context8.next = 3;\n              return contract.methods.getUploads(ipfsHash).call();\n\n            case 3:\n              total = _context8.sent;\n\n              _this.setState({\n                totalSold: total\n              });\n\n            case 5:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n    _this.getFile = _this.getFile.bind(_assertThisInitialized(_this));\n    _this.getImage = _this.getImage.bind(_assertThisInitialized(_this));\n    _this.submitFile = _this.submitFile.bind(_assertThisInitialized(_this));\n    _this.calcTime = _this.calcTime.bind(_assertThisInitialized(_this));\n    _this.loadHtml = _this.loadHtml.bind(_assertThisInitialized(_this));\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_this));\n    _this.buyToken = _this.buyToken.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    _this.checkView = _this.checkView.bind(_assertThisInitialized(_this)); //view timer\n\n    _this.viewHandler = _this.viewHandler.bind(_assertThisInitialized(_this));\n    _this.viewTimerHandler = _this.viewTimerHandler.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"checkView\",\n    value: function checkView() {\n      //view timer\n      if (this.state.render == false) {\n        this.closeModal();\n      }\n    }\n  }, {\n    key: \"loadHtml\",\n    value: function loadHtml() {\n      return \"https://ipfs.io/ipfs/\".concat(this.state.ipfsHash); // return (`https://wix.com`);\n    }\n  }, {\n    key: \"openModal\",\n    value: function openModal(hash) {\n      if (this.state.render) {\n        this.setState({\n          visible: true,\n          ipfsHash: hash\n        }); // setTimeout(\n        //   function () {\n        //     this.setState({ render: false });\n        //   }.bind(this), 100000);\n      } else {\n        this.setState({\n          visible: false\n        });\n      }\n    }\n  }, {\n    key: \"openViewModal\",\n    value: function openViewModal(hash) {\n      if (this.state.render) {\n        this.setState({\n          visibleTimer: true,\n          ipfsHash: hash\n        });\n        setTimeout(function () {\n          this.setState({\n            render: false\n          });\n        }.bind(this), 10000);\n      }\n    }\n  }, {\n    key: \"closeViewModal\",\n    value: function closeViewModal() {\n      this.setState({\n        visibleTimer: false\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        visible: false\n      });\n    }\n  }, {\n    key: \"getFile\",\n    value: function getFile(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var file = event.target.files[0];\n      var reader = new window.FileReader();\n      reader.readAsArrayBuffer(file);\n      console.log('buffer', this.state.buffer);\n\n      reader.onloadend = function () {\n        _this2.setState({\n          buffer: Buffer(reader.result)\n        });\n\n        console.log('buffer', _this2.state.buffer);\n        ipfs.files.add(_this2.state.buffer, function (error, result) {\n          if (error) {\n            console.error(error);\n            return;\n          }\n\n          _this2.setState({\n            ipfsHash: result[0].hash\n          });\n\n          console.log(\"Book Details: \", _this2.state.bookDetails);\n          Object.values(_this2.state.bookDetails).map(function (key, index) {\n            console.log(key[3]);\n\n            if (key[3] == _this2.state.ipfsHash) {\n              console.log(\"exists\" + _this2.state.exists);\n              return _this2.setState({\n                exists: true\n              });\n            }\n          });\n\n          if (_this2.state.exists) {\n            alert(\"This book already exists!\");\n          }\n        });\n      };\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(event) {\n      var _this3 = this;\n\n      event.preventDefault();\n      var file = event.target.files[0];\n      var reader = new window.FileReader();\n      reader.readAsArrayBuffer(file);\n      console.log('Image buffer', this);\n\n      reader.onloadend = function () {\n        _this3.setState({\n          imageBuffer: Buffer(reader.result)\n        });\n\n        console.log('Image buffer', _this3.state.imageBuffer);\n        ipfs.files.add(_this3.state.imageBuffer, function (error, result) {\n          if (error) {\n            console.error(error);\n            return;\n          }\n\n          _this3.setState({\n            bookImage: result[0].hash\n          });\n\n          console.log(\"Image Hash:\", _this3.state.bookImage);\n        });\n      };\n    }\n  }, {\n    key: \"submitFile\",\n    value: function submitFile(event) {\n      event.preventDefault();\n      console.log(\"BUFFER \", this.state.imageBuffer);\n      this.setState(this.uploadTransaction);\n    }\n  }, {\n    key: \"calcTime\",\n    value: function calcTime(timestamp) {\n      if (timestamp) {\n        var date = new Date(timestamp * 1000);\n        return date.toLocaleTimeString;\n      }\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      this.setState({\n        shown: !this.state.shown,\n        viewText: 'Hide Preview'\n      });\n    }\n  }, {\n    key: \"buyToken\",\n    value: function buyToken(event) {\n      event.preventDefault();\n      this.setState(this.buyTokenTransaction);\n    }\n  }, {\n    key: \"viewTimerHandler\",\n    value: function viewTimerHandler(value) {\n      console.log(value);\n      this.openViewModal(value);\n    }\n  }, {\n    key: \"viewHandler\",\n    value: function viewHandler(value) {\n      console.log(value);\n      this.openModal(value);\n    }\n  }, {\n    key: \"rentHandler\",\n    value: function rentHandler(hash) {\n      console.log(hash);\n      this.setState({\n        rentHash: hash\n      }, this.rentTranact);\n    }\n  }, {\n    key: \"buyHandler\",\n    value: function buyHandler(hash) {\n      this.setState({\n        ipfsHash: hash\n      }, this.purchaseTransaction);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      if (!this.state.web3) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275\n          },\n          __self: this\n        }, \"Loading Web3, accounts, and contract...\");\n      } // var hidden = {\n      // \tdisplay: this.state.shown ? \"block\" : \"none\"\n      // }\n\n\n      var coins = Object.values(this.state.bookDetails).map(function (key, index) {\n        return React.createElement(Card, {\n          imag: key[4],\n          pname: key[0],\n          author: key[1],\n          price: key[2],\n          rentClick: function rentClick() {\n            return _this4.rentHandler(key[3]);\n          },\n          buyClick: function buyClick() {\n            return _this4.buyHandler(key[3]);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282\n          },\n          __self: this\n        });\n      });\n      var booksList = Object.values(this.state.booksBought).map(function (key, index) {\n        return React.createElement(ProfileBooks, {\n          imag: key[2],\n          pname: key[1],\n          onClick: function onClick() {\n            return _this4.viewHandler(key[0]);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        });\n      });\n      var rentList = Object.values(this.state.rentedBooks).map(function (key, index) {\n        return React.createElement(ProfileBooks, {\n          imag: key[2],\n          pname: key[1],\n          onClick: function onClick() {\n            return _this4.viewHandler(key[0]);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        });\n      });\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, \"auth.or\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \"My Address: \"), this.state.accounts[0]), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, \"Upload to IPFS and Secure by Ethereum\")), React.createElement(Tabs, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(TabList, {\n        className: \"tabs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(Tab, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, \"Upload\"), React.createElement(Tab, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"Find Content\"), React.createElement(Tab, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, \"Buy Tokens\"), React.createElement(Tab, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, \"Profile\"), React.createElement(Tab, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, \"Author Insights\")), React.createElement(TabPanel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"form\",\n        onSubmit: function onSubmit(e) {\n          return _this4.submitFile(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, \"Select your file\"), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, \"Select Book: \"), React.createElement(\"input\", {\n        type: \"file\",\n        onChange: this.getFile,\n        accept: \"application/pdf\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, \"Select Book Image: \"), React.createElement(\"input\", {\n        type: \"file\",\n        onChange: this.getImage,\n        accept: \"image/*\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, \"Title: \"), React.createElement(\"input\", {\n        className: \"text\",\n        type: \"text\",\n        onInput: function onInput(e) {\n          return _this4.setState({\n            contentName: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, \"Author: \"), React.createElement(\"input\", {\n        className: \"text\",\n        type: \"text\",\n        onInput: function onInput(e) {\n          return _this4.setState({\n            ownerName: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, \"Purchase Price: \"), React.createElement(\"input\", {\n        className: \"text\",\n        type: \"text\",\n        onInput: function onInput(e) {\n          return _this4.setState({\n            price: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, \"Rent Price: \"), React.createElement(\"input\", {\n        className: \"text\",\n        type: \"text\",\n        onInput: function onInput(e) {\n          return _this4.setState({\n            rent: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, \"Rent Duration: \"), React.createElement(\"input\", {\n        className: \"text\",\n        type: \"text\",\n        onInput: function onInput(e) {\n          return _this4.setState({\n            rentDays: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, \"Upload \")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"hash-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, \"IPFS Hash: \"), React.createElement(\"span\", {\n        className: \"hashLink\",\n        onClick: function onClick() {\n          return _this4.openModal(_this4.state.ipfsHash);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, this.state.ipfsHash))), React.createElement(Modal, {\n        visible: this.state.visible,\n        width: \"600\",\n        height: \"600\",\n        effect: \"fadeInUp\",\n        onClickAway: function onClickAway() {\n          return _this4.closeModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, \"Preview\")), React.createElement(\"iframe\", {\n        className: \"preview\",\n        src: this.loadHtml(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }))), React.createElement(TabPanel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"refresh\",\n        onClick: this.getAll,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, \"Refresh\")), React.createElement(\"div\", {\n        className: \"coins\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, coins), React.createElement(Modal, {\n        visible: this.state.visible,\n        width: \"600\",\n        height: \"600\",\n        effect: \"fadeInUp\",\n        onClickAway: function onClickAway() {\n          return _this4.closeModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, \"Book Review\")), React.createElement(\"iframe\", {\n        className: \"preview\",\n        src: this.loadHtml(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }))), React.createElement(TabPanel, {\n        className: \"tab\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"form\",\n        onSubmit: this.buyToken,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, \"Buy Tokens\"), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370\n        },\n        __self: this\n      }, \"Tokens: \"), React.createElement(\"input\", {\n        className: \"text\",\n        type: \"text\",\n        onInput: function onInput(e) {\n          return _this4.setState({\n            token: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"buy button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, \"Buy \")))), React.createElement(TabPanel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }, \"Profile\"), React.createElement(\"button\", {\n        className: \"refresh\",\n        onClick: this.getCustomerCall,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, \"Refresh\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, \"Wallet Balance: \"), parseInt(this.state.wallet), \" \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, \"BOOKS BOUGHT\")), booksList, React.createElement(Modal, {\n        visible: this.state.visible,\n        width: \"600\",\n        height: \"600\",\n        effect: \"fadeInUp\",\n        onClickAway: function onClickAway() {\n          return _this4.closeModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, \"Book \")), React.createElement(\"iframe\", {\n        className: \"preview\",\n        src: this.loadHtml(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        className: \"rentLabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }, \"BOOKS RENTED\")), rentList), React.createElement(TabPanel, {\n        className: \"insights\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"refresh\",\n        onClick: this.getTotal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, \"Refresh\"), React.createElement(\"section\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394\n        },\n        __self: this\n      }, \"Total Books Sold / Rented\"), React.createElement(\"h1\", {\n        className: \"head\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }, this.state.totalSold)), React.createElement(\"section\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }, \"Total Earnings\"), React.createElement(\"h1\", {\n        className: \"head\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, \"50 ATC\")))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\utalwar\\Desktop\\authorCSS\\auth.or\\client\\src\\App.js"],"names":["React","Component","getWeb3","OwnershipContract","ipfs","Tab","Tabs","TabList","TabPanel","Modal","Card","ProfileBooks","App","props","state","totalSold","imageBuffer","bookImage","exists","visibleTimer","rentedBooks","rentHash","rent","rentDays","booksBoughtName","booksBought","wallet","current","visibleBook","bookDetails","prnt","render","visible","bookName","clientName","token","ownerName","price","contentName","viewText","showPreview","fileMetadata","storageValue","web3","accounts","contract","buffer","ipfsHash","componentDidMount","self","window","addEventListener","e","keyCode","setState","console","log","setInterval","checkView","eth","getAccounts","net","getId","networkId","deployedNetwork","networks","instance","Contract","abi","address","alert","error","uploadTransaction","methods","uploadContent","send","from","buyTokenTransaction","buyTokens","purchaseTransaction","purchase","getCustomerCall","getCustomer","call","response","_hex","getAll","getAllBooks","rentTranact","rentTransaction","getTotal","getUploads","total","getFile","bind","getImage","submitFile","calcTime","loadHtml","toggle","buyToken","closeModal","viewHandler","viewTimerHandler","hash","setTimeout","event","preventDefault","file","target","files","reader","FileReader","readAsArrayBuffer","onloadend","Buffer","result","add","Object","values","map","key","index","timestamp","date","Date","toLocaleTimeString","shown","value","openViewModal","openModal","coins","rentHandler","buyHandler","booksList","rentList","parseInt"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport getWeb3 from \"./utils/getWeb3\";\r\nimport OwnershipContract from \"./contracts/Ownership.json\"\r\nimport ipfs from \"./ipfsCall\";\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport \"react-tabs/style/react-tabs.css\";\r\nimport Modal from 'react-awesome-modal';\r\nimport Card from './Card.js';\r\nimport ProfileBooks from './ProfileBooks.js';\r\n\r\nimport \"./App.css\";\r\n\r\nclass App extends Component {\r\n\r\n  state = { totalSold: null, imageBuffer: null, bookImage: null, exists: false, visibleTimer: false, rentedBooks: [], rentHash: null,rent: null, rentDays: null,booksBoughtName: [], booksBought: [],wallet: null, current: [], visibleBook: false, bookDetails: [], prnt: false, render: true, visible: false, bookName: null, clientName: \"utsav\", token: 0, ownerName: null, price: 0, contentName: null, viewText: 'Show Preview', showPreview: false, fileMetadata: [], storageValue: [], web3: null, accounts: null, contract: null, buffer: null, ipfsHash: null };\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.getFile = this.getFile.bind(this);\r\n    this.getImage = this.getImage.bind(this);\r\n    this.submitFile = this.submitFile.bind(this);\r\n    this.calcTime = this.calcTime.bind(this);\r\n    this.loadHtml = this.loadHtml.bind(this);\r\n    this.toggle = this.toggle.bind(this);\r\n    this.buyToken = this.buyToken.bind(this);\r\n    this.closeModal = this.closeModal.bind(this);\r\n    this.checkView = this.checkView.bind(this);//view timer\r\n    this.viewHandler = this.viewHandler.bind(this);\r\n    this.viewTimerHandler = this.viewTimerHandler.bind(this);\r\n  }\r\n\r\n\r\n  componentDidMount = async () => {\r\n\r\n    var self = this;\r\n    window.addEventListener(\"keyup\", function (e) {\r\n      if (e.keyCode == 44) {\r\n        self.setState({ prnt: true });\r\n        console.log(\"pressed!\")\r\n      }\r\n    });\r\n    setInterval(() => this.checkView(), 1000);//view timer\r\n\r\n    try {\r\n      // Get network provider and web3 instance.\r\n      const web3 = await getWeb3();\r\n\r\n      // Use web3 to get the user's accounts.\r\n      const accounts = await web3.eth.getAccounts();\r\n\r\n      // Get the contract instance.\r\n      const networkId = await web3.eth.net.getId();\r\n      const deployedNetwork = OwnershipContract.networks[networkId];\r\n      const instance = new web3.eth.Contract(\r\n        OwnershipContract.abi,\r\n        deployedNetwork && deployedNetwork.address,\r\n      );\r\n      instance.address = \"0xbffdbf74b654b73f17e6cc7cf4fd82bf415f2b53\";\r\n      // Set web3, accounts, and contract to the state, and then proceed with an\r\n      // example of interacting with the contract's methods.\r\n      this.setState({ web3, accounts, contract: instance });\r\n    } catch (error) {\r\n      // Catch any errors for any of the above operations.\r\n      alert(\r\n        `Failed to load web3, accounts, or contract. Check console for details.`,\r\n      );\r\n      console.error(error);\r\n    }\r\n  };\r\n  \r\n  checkView() { //view timer\r\n    if (this.state.render == false) {\r\n      this.closeModal();\r\n    }\r\n  }\r\n\r\n  uploadTransaction = async () => {\r\n    const { accounts, contract, ipfsHash, contentName, ownerName, price, rent, rentDays, bookImage } = this.state;\r\n\r\n    await contract.methods.uploadContent(ipfsHash, contentName, ownerName, price, rent, rentDays, bookImage).send({ from: accounts[0] });\r\n\r\n    console.log(\"storage Value: \", this.state.storageValue);\r\n  };\r\n\r\n\r\n  buyTokenTransaction = async () => {\r\n    const { contract, accounts, clientName, token } = this.state\r\n    await contract.methods.buyTokens(token).send({ from: accounts[0] });\r\n  };\r\n\r\n  purchaseTransaction = async () => {\r\n    console.log(\"Working\");\r\n    const { ipfsHash, contract, accounts} = this.state;\r\n    await contract.methods.purchase(ipfsHash).send({from: accounts[0]});\r\n    console.log(\"Transaction Successful !\");\r\n  };\r\n\r\n  getCustomerCall = async () => {\r\n    const { contract, accounts, clientName } = this.state;\r\n    const response = await contract.methods.getCustomer(accounts[0]).call();\r\n    this.setState({ wallet: response[0]._hex, booksBought: response[1], rentedBooks: response[2]});\r\n    console.log(\"Books Bought : \", response);\r\n  };\r\n\r\n  getAll = async () => {\r\n    const { contract } = this.state;\r\n    const response = await contract.methods.getAllBooks().call();\r\n    this.setState({ bookDetails: response });\r\n    console.log(\"books: \", this.state.bookDetails);\r\n  };\r\n\r\n  rentTranact = async () => {\r\n    const { contract, accounts, rentHash} = this.state;\r\n    await contract.methods.rentTransaction(rentHash).send({from: accounts[0]});\r\n  };\r\n\r\n  getTotal = async () => {\r\n    const { contract, accounts, rentHash, ipfsHash} = this.state;\r\n    const total = await contract.methods.getUploads(ipfsHash).call();\r\n    this.setState({totalSold: total});\r\n  }\r\n\r\n  loadHtml() {\r\n    return (`https://ipfs.io/ipfs/${this.state.ipfsHash}`);\r\n    // return (`https://wix.com`);\r\n  }\r\n\r\n  openModal(hash) {\r\n    if (this.state.render) {\r\n      this.setState({\r\n        visible: true,\r\n        ipfsHash: hash\r\n      });\r\n      // setTimeout(\r\n      //   function () {\r\n      //     this.setState({ render: false });\r\n      //   }.bind(this), 100000);\r\n    }\r\n    else {\r\n      this.setState({\r\n        visible: false\r\n      });\r\n    }\r\n  }\r\n\r\n  openViewModal(hash) {\r\n    if (this.state.render) {\r\n      this.setState({\r\n        visibleTimer: true,\r\n        ipfsHash: hash\r\n      });\r\n      setTimeout(\r\n        function () {\r\n          this.setState({ render: false });\r\n        }.bind(this), 10000);\r\n    }\r\n  }\r\n\r\n  closeViewModal() {\r\n    this.setState({\r\n      visibleTimer: false\r\n    });\r\n  }\r\n\r\n  \r\n  closeModal() {\r\n    this.setState({\r\n      visible: false\r\n    });\r\n  }\r\n\r\n  getFile(event) {\r\n    event.preventDefault()\r\n    const file = event.target.files[0]\r\n    const reader = new window.FileReader()\r\n    reader.readAsArrayBuffer(file);\r\n    console.log('buffer', this.state.buffer)\r\n\r\n    reader.onloadend = () => {\r\n      this.setState({ buffer: Buffer(reader.result) })\r\n      console.log('buffer', this.state.buffer)\r\n\r\n      ipfs.files.add(this.state.buffer, (error, result) => {\r\n        if (error) {\r\n          console.error(error)\r\n          return\r\n        }\r\n        this.setState({ ipfsHash: result[0].hash })\r\n        console.log(\"Book Details: \",this.state.bookDetails);\r\n        Object.values(this.state.bookDetails).map((key, index) => {\r\n          console.log(key[3])\r\n          if(key[3] == this.state.ipfsHash) {\r\n            console.log(\"exists\" + this.state.exists)\r\n            return(this.setState({exists: true}))\r\n          }\r\n        });\r\n        if(this.state.exists) {\r\n          alert(\"This book already exists!\")\r\n        }\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  getImage(event) {\r\n    event.preventDefault()\r\n    const file = event.target.files[0]\r\n    const reader = new window.FileReader()\r\n    reader.readAsArrayBuffer(file);\r\n    console.log('Image buffer', this)\r\n\r\n    reader.onloadend = () => {\r\n      this.setState({ imageBuffer: Buffer(reader.result) })\r\n      console.log('Image buffer', this.state.imageBuffer)\r\n\r\n      ipfs.files.add(this.state.imageBuffer, (error, result) => {\r\n        if (error) {\r\n          console.error(error)\r\n          return\r\n        }\r\n        this.setState({bookImage: result[0].hash})\r\n        console.log(\"Image Hash:\", this.state.bookImage)\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  submitFile(event) {\r\n    event.preventDefault();\r\n    console.log(\"BUFFER \", this.state.imageBuffer);\r\n    this.setState(this.uploadTransaction)  \r\n  }\r\n\r\n  calcTime(timestamp) {\r\n    if (timestamp) {\r\n      var date = new Date(timestamp * 1000);\r\n      return date.toLocaleTimeString;\r\n    }\r\n  }\r\n\r\n  toggle() {\r\n    this.setState({\r\n      shown: !this.state.shown,\r\n      viewText: 'Hide Preview'\r\n    });\r\n  }\r\n\r\n  buyToken(event) {\r\n    event.preventDefault();\r\n    this.setState(this.buyTokenTransaction);\r\n  }\r\n\r\n  viewTimerHandler(value) {\r\n    console.log(value);\r\n    this.openViewModal(value);\r\n  }\r\n\r\n  viewHandler(value) {\r\n    console.log(value);\r\n    this.openModal(value);\r\n  }\r\n\r\n  rentHandler(hash) {\r\n    console.log(hash);\r\n    this.setState({rentHash: hash}, this.rentTranact);\r\n  }\r\n\r\n  buyHandler(hash) {\r\n    this.setState({ ipfsHash: hash }, this.purchaseTransaction);\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.web3) {\r\n      return <div>Loading Web3, accounts, and contract...</div>;\r\n    }\r\n    // var hidden = {\r\n    // \tdisplay: this.state.shown ? \"block\" : \"none\"\r\n    // }\r\n\r\n    const coins = Object.values(this.state.bookDetails).map((key, index) => (\r\n      <Card imag={key[4]} pname={key[0]} author={key[1]} price={key[2]} rentClick={()=> this.rentHandler(key[3])}  buyClick={() => this.buyHandler(key[3])} />\r\n    ));\r\n\r\n    const booksList = Object.values(this.state.booksBought).map((key, index) => (\r\n      <ProfileBooks imag={key[2]} pname={key[1]} onClick={()=> this.viewHandler(key[0])}/>\r\n    ));\r\n    \r\n    const rentList = Object.values(this.state.rentedBooks).map((key, index) => (\r\n      <ProfileBooks imag={key[2]} pname={key[1]} onClick={()=> this.viewHandler(key[0])}/>\r\n    ));\r\n    return (\r\n      <div className=\"App\">\r\n        <div className=\"Header\">\r\n          <h1>auth.or</h1>\r\n          <p><strong>My Address: </strong>{this.state.accounts[0]}</p>\r\n          <p>Upload to IPFS and Secure by Ethereum</p>\r\n        </div>\r\n\r\n        <Tabs>\r\n          <TabList className=\"tabs\">\r\n            <Tab>\r\n              Upload\r\n            </Tab>\r\n            <Tab>\r\n              Find Content\r\n            </Tab>\r\n            <Tab>\r\n              Buy Tokens\r\n            </Tab>\r\n            <Tab>\r\n              Profile\r\n            </Tab>\r\n            <Tab>\r\n              Author Insights\r\n            </Tab>\r\n          </TabList>\r\n\r\n          <TabPanel >\r\n\r\n            <form className=\"form\" onSubmit={(e) => this.submitFile(e)}>\r\n              <h3>Select your file</h3>\r\n              <label>Select Book: </label>\r\n              <input type='file' onChange={this.getFile} accept='application/pdf' />\r\n              <label>Select Book Image: </label>\r\n              <input type='file' onChange={this.getImage} accept='image/*'/>\r\n              <br></br>\r\n              <label>Title: </label>\r\n              <input className=\"text\" type='text' onInput={e => this.setState({ contentName: e.target.value })} />\r\n              <label>Author: </label>\r\n              <input className=\"text\" type='text' onInput={e => this.setState({ ownerName: e.target.value })} />\r\n              <label>Purchase Price: </label>\r\n              <input className=\"text\" type='text' onInput={e => this.setState({ price: e.target.value })} />\r\n              <label>Rent Price: </label>\r\n              <input className=\"text\" type='text' onInput={e => this.setState({ rent: e.target.value })} />\r\n              <label>Rent Duration: </label>\r\n              <input className=\"text\" type='text' onInput={e => this.setState({ rentDays: e.target.value })} />\r\n              <button className=\"button\"><span>Upload </span></button><br></br>\r\n              \r\n              <div className=\"hash-div\">\r\n                <strong>IPFS Hash: </strong>\r\n                <span className=\"hashLink\" onClick={() => this.openModal(this.state.ipfsHash)}>{this.state.ipfsHash}</span>\r\n              </div>\r\n            </form>\r\n\r\n            <Modal visible={this.state.visible} width=\"600\" height=\"600\" effect=\"fadeInUp\" onClickAway={() => this.closeModal()}>\r\n              <p><strong>Preview</strong></p>\r\n              <iframe className=\"preview\" src={this.loadHtml()} ></iframe>\r\n            </Modal>\r\n\r\n          </TabPanel>\r\n\r\n          <TabPanel >\r\n            <div>\r\n              <button className=\"refresh\" onClick={this.getAll}>Refresh</button>\r\n            </div>\r\n            <div className=\"coins\">\r\n              {coins}\r\n            </div>\r\n            <Modal visible={this.state.visible} width=\"600\" height=\"600\" effect=\"fadeInUp\" onClickAway={() => this.closeModal()}>\r\n              <p><strong>Book Review</strong></p>\r\n              <iframe className=\"preview\" src={this.loadHtml()} ></iframe>\r\n            </Modal>\r\n          </TabPanel>\r\n\r\n          <TabPanel className=\"tab\">\r\n            \r\n            <form className=\"form\" onSubmit={this.buyToken}>\r\n              <h3>Buy Tokens</h3>\r\n              <label>Tokens: </label>\r\n              <input className=\"text\" type='text' onInput={e => this.setState({ token: e.target.value })} />\r\n              <button className=\"buy button\"><span>Buy </span></button>\r\n            </form>\r\n          </TabPanel>\r\n\r\n          <TabPanel>\r\n            <h3>Profile</h3>\r\n            <button className=\"refresh\" onClick={this.getCustomerCall}>Refresh</button>\r\n            \r\n            <p><strong>Wallet Balance: </strong>{parseInt(this.state.wallet)} </p>\r\n            <p><strong>BOOKS BOUGHT</strong></p>\r\n            {booksList}\r\n            <Modal visible={this.state.visible} width=\"600\" height=\"600\" effect=\"fadeInUp\" onClickAway={() => this.closeModal()}>\r\n              <p><strong>Book </strong></p>\r\n              <iframe className=\"preview\" src={this.loadHtml()} ></iframe>\r\n            </Modal>\r\n\r\n            <p className=\"rentLabel\"><strong>BOOKS RENTED</strong></p>\r\n            {rentList}\r\n          </TabPanel>\r\n          <TabPanel className=\"insights\">\r\n          <button className=\"refresh\" onClick={this.getTotal}>Refresh</button>\r\n            <section>\r\n              <h3>Total Books Sold / Rented</h3>\r\n              <h1 className=\"head\">{this.state.totalSold}</h1>\r\n            </section>\r\n            <section>\r\n              <h3>Total Earnings</h3>\r\n              <h1 className=\"head\">50 ATC</h1>\r\n            </section>\r\n          </TabPanel>\r\n        </Tabs>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}